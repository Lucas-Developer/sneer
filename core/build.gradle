version = "0.0.1"

apply plugin: "clojure"
apply plugin: "java"
apply plugin: "eclipse"
apply plugin: "maven"

sourceCompatibility = 1.6
targetCompatibility = 1.6

buildscript {
    repositories {
        mavenCentral()
        maven { url "https://clojars.org/repo" }
    }


    dependencies {
        classpath "clojuresque:clojuresque:1.7.0"
    }
}


repositories {
    mavenCentral()
    maven { url "https://clojars.org/repo" }
}


sourceSets {
    main {
        clojure {
            srcDir 'src'
            aotCompile = true
        }
        java {
            srcDir 'src'
        }
    }
}

eclipse.project {
    natures 'ccw.nature'
    buildCommand 'ccw.builder'
}

dependencies {
    compile 'org.clojure:clojure:1.6.0'
    compile 'org.clojure:core.async:0.1.303.0-886421-alpha'
    compile 'com.netflix.rxjava:rxjava-clojure:' + external.rx.version
    compile('com.cognitect:transit-clj:0.8.229') {
    	exclude group: 'org.msgpack', module: 'msgpack'
    	exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'
    	exclude group: 'org.apache.directory.studio', module: 'org.apache.commons.codec'
    }
    compile('com.google:bitcoinj:0.11.3') {
    	exclude group: 'com.google.protobuf', module: 'protobuf-java'
    	exclude group: 'com.lambdaworks', module: 'scrypt'
    }
    compile project(':java-api')
}

uploadArchives {
    repositories {
        mavenLocal()
    }
}
